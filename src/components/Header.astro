---
import Icon from './Icon.astro';
import ThemeToggle from './ThemeToggle.astro';
---

<header class="fixed top-0 left-0 w-full bg-light-300/90 dark:bg-dark-200/90 backdrop-blur-sm z-50 transition-colors duration-300">
  <div class="container mx-auto px-4 py-4 flex items-center justify-between">
    <!-- Logo -->
    <a href="#hero" class="flex items-center gap-2 text-dark-100 dark:text-light-100 font-brand text-xl" style="font-family: Cambria, serif;">
      <Icon icon="terminal-window" color="var(--accent-regular)" size="1.6em" gradient />
      <span>Satvik Jonnalagadda</span>
    </a>

    <!-- Mobile Menu Button -->
    <button id="mobile-menu-button" class="md:hidden text-dark-100 dark:text-light-100">
      <Icon icon="list" size="1.5em" />
    </button>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center gap-6">
      <ul class="flex items-center gap-6">
        <li><a href="#hero" class="nav-link">Home</a></li>
        <li><a href="#education" class="nav-link">Education</a></li>
        <li><a href="#experience" class="nav-link">Experience</a></li>
        <li><a href="#projects" class="nav-link">Projects</a></li>
        <li><a href="#certifications" class="nav-link">Certifications</a></li>
        <li><a href="#interests" class="nav-link">Interests</a></li>
      </ul>

      <div class="flex items-center gap-3">
        <a href="https://github.com/satvikjo" target="_blank" class="icon-btn" aria-label="GitHub">
          <Icon icon="github-logo" size="1.5em" />
        </a>
        <a href="https://linkedin.com/in/satvik-jonnalagadda" target="_blank" class="icon-btn" aria-label="LinkedIn">
          <Icon icon="linkedin-logo" size="1.5em" />
        </a>
        <ThemeToggle />
      </div>
    </nav>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="mobile-menu" font-size="12 px">
      <button id="close-menu" class="close-btn">
        âœ–
      </button>
      <ul class="flex flex-col items-center gap-6 text-xl">
        <li><a href="#hero" class="mobile-nav-link">Home</a></li>
        <li><a href="#education" class="mobile-nav-link">Education</a></li>
        <li><a href="#experience" class="mobile-nav-link">Experience</a></li>
        <li><a href="#projects" class="mobile-nav-link">Projects</a></li>
        <li><a href="#certifications" class="mobile-nav-link">Certifications</a></li>
        <li><a href="#interests" class="mobile-nav-link">Interests</a></li>
      </ul>
      <div class="flex items-center gap-4 mt-8">
        <a href="https://github.com/satvikjo" target="_blank" class="icon-btn" aria-label="GitHub">
          <Icon icon="github-logo" size="1.5em" />
        </a>
        <a href="https://linkedin.com/in/satvik-jonnalagadda" target="_blank" class="icon-btn" aria-label="LinkedIn">
          <Icon icon="linkedin-logo" size="1.5em" />
        </a>
        <ThemeToggle />
      </div>
    </div>
  </div>
</header>

<style>
  .nav-link {
    position: relative;
    color: var(--gray-200);
    font-weight: 500;
    transition: color 0.3s ease;
  }

  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--gradient-accent);
    transition: width 0.3s ease;
  }

  .nav-link:hover {
    color: var(--accent-regular);
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .mobile-menu {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    z-index: 9999 !important;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transform: translateX(100%);
    transition: transform 0.4s ease-in-out;
  }

  .mobile-menu.open {
    transform: translateX(0);
  }

  .mobile-nav-link {
    font-size: 1rem;
    font-weight: 300;
    margin: 10px 0;
  }

  .mobile-nav-link:hover {
    color: var(--accent-regular);
  }

  .close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    font-size: 0.8rem;
    cursor: pointer;
    background: none;
    border: none;
    color: black;
  }

  body.no-scroll {
    overflow: hidden;
  }
</style>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const closeMenuButton = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');

  function openMenu() {
    mobileMenu.classList.add("open");
    document.body.classList.add("no-scroll");
  }

  function closeMenu() {
    mobileMenu.classList.remove("open");
    document.body.classList.remove("no-scroll");
  }

  mobileMenuButton.addEventListener("click", openMenu);
  closeMenuButton.addEventListener("click", closeMenu);
</script>
